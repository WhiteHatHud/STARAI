section:
  template: |
    You are writing a section of an educational styleb case study.

    SECTION: {section_title}
    DESCRIPTION: {section_description}
    WORD LIMIT: {max_words} words

    Here is relevant information from documents:

    {context}

    {previous_sections_text}

    Write the "{section_title}" section of the styleb study. Follow these guidelines:

    1. Use clear, engaging, and easy-to-follow language that supports learning.
    2. Focus on helping readers understand key ideas, decisions, and lessons â€” not just presenting facts.
    3. Include relevant examples and applications that make abstract concepts easier to grasp.
    4. Keep explanations concise and structured so students can quickly connect theory to practice.
    5. Stay within the word limit of {max_words} words
    6. For learning objectives or discussion questions, create clear numbered lists
    7. Include both theoretical concepts and practical applications

    SECTION CONTENT:

  input_variables:
    - section_title
    - section_description
    - max_words
    - context
    - previous_sections_text

review:
  template: |
    You are reviewing a styleb case study for educational effectiveness and coherence.

    STYLEB STUDY:
    {report}

    Please identify any issues with:
    1. Learning progression and pedagogical flow
    2. Clarity of instructional content
    3. Integration of learning objectives with content
    4. Effectiveness of discussion questions and activities
    5. Repetitive content across the sections, either using the same phrasing or conveying the same meaning

    For each issue, provide:
    - The specific issue
    - Which section(s) it affects
    - A suggested revision

    If the issue type is repetition, specify in the suggested revision exactly one single section that should contain the information and
    which sections should have repetitive content completely removed. 

    Example suggested_revision: "Detail the failed power-cut operation and its consequences fully in 'Background' section.
    In all other sections, refer to it succinctly without re-describing the event or remove them entirely

    Format your response as JSON with this structure:
    {{
        "overall_assessment": "Brief overall assessment",
        "educational_effectiveness": 1-5,
        "issues": [
            {{
                "issue_type": "flow|clarity|objectives|activities|duplication",
                "description": "Description of the issue",
                "affected_sections": ["section name(s)"],
                "suggested_revision": "Specific suggestion for revision"
            }}
        ]
    }}

    If no issues are found, return an empty issues array.

    JSON RESPONSE:

  input_variables:
    - report

gap_analysis:
  template: |
    You are reviewing the following section of a styleb case study:

    SECTION TITLE: {section_title}
    SECTION CONTENT:
    {section_content}

    Identify specific educational elements that are missing or need enhancement:
    1. Missing instructional components
    2. Underdeveloped learning points
    3. Areas needing examples, activities, or assessments

    For each gap, provide a specific search query that would help fill this gap.
    Format your response as a JSON array of objects with "gap" and "query" fields.

    Example:
    [
        {{"gap": "Real-world application examples", "query": "practical applications of concept X in industry"}},
        {{"gap": "Assessment activities for this concept", "query": "learning activities to assess understanding of Y"}}
    ]

    JSON RESPONSE:

  input_variables:
    - section_title
    - section_content

enhancement:
  template: |
    You are enhancing a section of a styleb case study.

    ORIGINAL SECTION:
    {section_content}

    WORD LIMIT: {max_words} words

    ADDITIONAL INFORMATION TO INCORPORATE:
    {additional_context}

    Rewrite the section, enhancing it with the additional information.
    Keep within the word limit of {max_words} and ensure it maintains factual accuracy.
    Focus on improving the educational value by incorporating:
    - Better examples and applications
    - Clearer explanations of concepts
    - More effective teaching elements

    ENHANCED SECTION CONTENT:

  input_variables:
    - section_content
    - max_words
    - additional_context

revision:
  template: |
    You are revising a section of a styleb case study.

    CURRENT SECTION: {section_title}
    WORD LIMIT: {max_words} words

    CONTENT:
    {section_content}

    ISSUE TO FIX:
    {issue_description}

    SUGGESTED REVISION:
    {suggested_revision}

    Please provide a revised version of this section that addresses the issue.
    Keep within the word limit of {max_words} and ensure it maintains factual accuracy.
    Only output the revised content without any explanations or headers.
    Remove any existing word count if present.

    REVISED SECTION CONTENT:

  input_variables:
    - section_title
    - max_words
    - section_content
    - issue_description
    - suggested_revision

parallel_review:
  template: |
    You are reviewing two adjacent sections of a styleb case study for educational effectiveness and coherence.

    SECTIONS TO REVIEW:
    {pair_content}

    Please identify any issues with:
    1. Learning progression and pedagogical flow
    2. Clarity of instructional content
    3. Integration of learning objectives with content
    4. Effectiveness of discussion questions and activities
    5. Repetitive content across the sections, either using the same phrasing or conveying the same meaning

    For each issue, provide:
    - The specific issue
    - Which section(s) it affects
    - A suggested revision

    If the issue type is repetition, specify in the suggested revision exactly one single section that should contain the information and
    which sections should have repetitive content completely removed. 

    Example suggested_revision: "Detail the failed power-cut operation and its consequences fully in 'Background' section.
    In all other sections, refer to it succinctly without re-describing the event or remove them entirely

    Format as JSON:
    {{
        "issues": [
            {{
                "issue_type": "flow|clarity|objectives|activities|duplication",
                "description": "Description of the issue",
                "affected_sections": ["{section1_title}", "{section2_title}"],
                "suggested_revision": "Specific suggestion for revision"
            }}
        ]
    }}

    If no issues are found, return an empty issues array.

    JSON RESPONSE:

  input_variables:
    - pair_content
    - section1_title
    - section2_title
