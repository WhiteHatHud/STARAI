# TEMPLATES FOR CUSTOM STYLE STUDY
content_section:
  template: |
    You are writing a section of a {report_type} style case study.

    SECTION TITLE: {section_title}
    DESCRIPTION: {section_description}
    FORMAT: Generate the results in a {format} format
    
    WORD LIMIT: {max_words} words

    FORMATTING INSTRUCTIONS: {formatting_instructions}

    SUPPORTING DOCUMENTS: {supporting_documents}

    EXAMPLE OF SECTION CONTENT: {generic_example}

    Here is relevant information from documents:

    {context}

    {previous_sections_text}

    Write the "{section_title}" section of the custom case study. Follow these guidelines:

    1. Use clear, professional language appropriate for the audience
    2. Focus on objective facts from the provided context
    3. Use the supporting documents for more context on how to generate the section if applicable
    3. Maintain chronological clarity where relevant
    4. Integrate key figures, numbers, and data where appropriate
    5. Stay within the word limit of {max_words} words
    6. Do not make up information that is not in the provided context
    7. Follow the brevity and detail level of the generic_example provided
    8. Follow the exact formatting used in generic_example (Same table columns and rows, bullet styles, etc.)
    9. Follow the structure of the generic_example as closely as possible
    10. Fill in fields wrapped in angle brackets < > with actual content and remove the brackets
    11. For fields with not enough information in the context, replace them with "<Not enough information>"
    12. Do not directly reference the context in the output, but use it to inform the content

    SECTION CONTENT:

  input_variables:
    - report_type
    - section_title
    - section_description
    - format
    - max_words
    - formatting_instructions
    - supporting_documents
    - generic_example
    - context
    - previous_sections_text

structural_section:
  template: |
    You are writing a structural section of a {report_type} style case study.

    SECTION TITLE: {section_title}
    DESCRIPTION: {section_description}
    FORMAT: Generate the results in a {format} format
    
    WORD LIMIT: {max_words} words

    FORMATTING INSTRUCTIONS: {formatting_instructions}

    EXAMPLE OF SECTION CONTENT: {generic_example}

    Here is relevant information from documents:

    {context}

    Write the "{section_title}" structural section of the custom case study. Follow these guidelines:

    1. Use clear, professional language appropriate for the audience
    2. Integrate key figures, numbers, and data where appropriate
    3. Do not make up information that is not in the provided context
    4. Use the provided example as a template
    5. Fill in fields wrapped in angle brackets < > with actual content and remove the brackets
    6. For fields with not enough information in the context, replace them with "<Not enough information>"
    7. Do not add any additional content that is not present in the generic_example
    8. Follow the brevity, spacing and indentation of the example provided
    9. Do not directly reference the context in the output, but use it to inform the content

    SECTION CONTENT:

  input_variables:
    - report_type
    - section_title
    - section_description
    - format
    - max_words
    - formatting_instructions
    - generic_example
    - context

formatting_section:
  template: |
    You are writing a formatting section of a {report_type} style case study.

    SECTION TITLE: {section_title}
    DESCRIPTION: {section_description}
    FORMAT: Generate the results in a {format} format

    FORMATTING INSTRUCTIONS: {formatting_instructions}

    EXAMPLE OF SECTION CONTENT: {generic_example}

    Write the "{section_title}" formatting section of the custom case study. Follow these guidelines:

    1. Use the provided example as a template and create the section content accordingly
    2. Follow the brevity, spacing and indentation of the example provided
    3. Fill in fields wrapped in angle brackets < > with actual content and remove the brackets
    4. For fields with not enough information in the context, replace them with "<Not enough information>"

    SECTION CONTENT:

  input_variables:
    - report_type
    - section_title
    - section_description
    - format
    - formatting_instructions
    - generic_example

review:
  template: |
    You are reviewing a {report_type} style case study for coherence and consistency.

    CASE STUDY:
    {report}
    
    Please identify any issues with:
    1. Narrative flow and consistency
    2. Factual contradictions or inconsistencies
    3. Missing connections between sections
    4. Repetitive content that could be consolidated
    
    For each issue, provide:
    - The specific issue
    - Which section(s) it affects
    - A suggested revision
    
    Format your response as JSON with this structure:
    {{
        "overall_assessment": "Brief overall assessment",
        "issues": [
            {{
                "issue_type": "flow|contradiction|missing_connection|repetition|unfilled_placeholder",
                "description": "Description of the issue",
                "affected_sections": ["section name(s)"],
                "suggested_revision": "Specific suggestion for revision"
            }}
        ]
    }}
    
    If no issues are found, return an empty issues array.
    
    JSON RESPONSE:

  input_variables:
    - report_type
    - report

revision:
  template: |
    You are revising a section of a {report_type} style case study.

    CURRENT SECTION: {section_title}
    CONTENT:
    {section_content}
    
    ISSUE TO FIX:
    {issue_description}
    
    SUGGESTED REVISION:
    {suggested_revision}
    
    1. Please provide a revised version of this section that addresses the issue.
    2. Keep the word count similar and ensure it maintains factual accuracy.
    3. Maintain the level of detail and brevity of the original section.
    4. Only output the revised content without any explanations or headers.
    5. Fill in fields wrapped in angle brackets < > with actual content and remove the brackets
    6. For fields with not enough information in the context, replace them with "<Not enough information>"
    7. If the section is in a specific format (textdata, listdata, tabledata), ensure the output matches that format.
    8. Do not alter the format of the section (e.g. DO NOT change the columns in tabledata).

    REVISED SECTION CONTENT:

  input_variables:
    - report_type
    - section_title
    - section_content
    - issue_description
    - suggested_revision

gap_analysis:
  template: |
    You are reviewing the following section of a {report_type} style case study:

    SECTION TITLE: {section_title}
    SECTION CONTENT:
    {section_content}
    
    Identify specific information that is missing or needs enhancement:
    1. Missing facts (dates, figures, metrics)
    2. Underdeveloped points
    3. Areas needing examples or evidence
    
    For each gap, provide a specific search query that would help fill this gap.
    Format your response as a JSON array of objects with "gap" and "query" fields.
    
    Example:
    [
        {{"gap": "Revenue figures for 2022", "query": "company XYZ revenue 2022 financial data"}},
        {{"gap": "Details about the investigation", "query": "investigation details for case XYZ"}}
    ]
    
    JSON RESPONSE:

  input_variables:
    - report_type
    - section_title
    - section_content

enhancement:
  template: |
    You are enhancing a section of a {report_type} style case study.

    ORIGINAL SECTION:
    {section_content}
    
    ADDITIONAL INFORMATION TO INCORPORATE:
    {additional_context}
    
    1. Rewrite the section, enhancing it with the additional information.
    2. Maintain the level of detail and brevity of the original section.
    3. Fill in fields wrapped in angle brackets < > with actual content and remove the brackets
    4. For fields with not enough information in the context, replace them with "<Not enough information>"
    5. If the section is in a specific format (textdata, listdata, tabledata), ensure the output matches that format.
    6. Do not alter the format of the section (e.g. DO NOT change the columns in tabledata), but fill in the gaps and make the content more complete and detailed.
    7. Format must still follow the below JSON structure:

    {{
        "textdata || listdata || tabledata": content
    }}
    
    ENHANCED SECTION CONTENT:

  input_variables:
    - report_type
    - section_content
    - additional_context

reprocess:
  template: |
    You are reprocessing a section of a style report.

    ORIGINAL SECTION:
    {section}

    REMARKS:
    {remarks}

    1. Reprocess the section content based on the remarks.
    2. Follow the format of the original section as closely as possible.
    3. Do not alter the format of the section.
    4. Only return valid JSON
    5. Use the below case study for context:

    {report}

    REPROCESSED SECTION CONTENT:

  input_variables:
    - remarks
    - section
    - report